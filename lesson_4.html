<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8" />
	<title></title>
	<!--<link rel="stylesheet" href="style.css" /> -->
	<style>
		body {
			text-align: center;
		}

		/*
		.answer {
			width: 700px;
			min-height: 300px;
			text-align: center;
			margin: 0 auto;
		}
*/

	</style>
</head>

<body>
	<h1>домашняя работа</h1>
	<script>
		"use strict";
		//задание1
		//получение числа и проверки + преобразование строки здесь
		loop:
			while (true) {
				var r = prompt('введите числа от 1 до 999');
				let num = r.length;
				switch (num) {
					case 1:
						r = '00' + r;
						break;
					case 2:
						r = '0' + r;
						break;
					case 3:
						r;
						break;
					default:
						alert('Вы ввели что то не то!');
						continue loop;
				}
				break;
			}

		//преобразует в необходимый нам обьект
		function sfringToObject(a) {
			var obj = new String(r);
			return {
				единицы: a[2],
				десятки: a[1],
				сотни: a[0]
			}

		}

		var d = sfringToObject(r);
		console.log(d);



		//задание корзина

		//товары и цены
		let goods = [{
				name: "футболка",
				price: 1000,

			},
			{
				name: "костюм",
				price: 3000,

			},
			{
				name: "пальто",
				price: 8000,

			},
			{
				name: "пуховик",
				price: 4000,

			}
		];

		//обьявил корзину
		var backet = [];

		//добавляет обьект в корзину index - индекс обьекта из базы товара count - количество товара base - из какой базы товар
		function pushBacket(i, count, base) {

			let result = {
				name: base[i].name,
				price: base[i].price,
				count: count,
				sum: base[i].price * count
			}

			backet.push(result);
		}

		//добавляет товар в корзину
		function addGoodBacket(index, count = 1) {

			for (var i in backet) {

				if (backet[i].name === goods[index].name) {
					let result =
						backet[i].count += count;
					backet[i].sum = backet[i].price * backet[i].count;
					return console.log(backet);
				}

			}

			pushBacket(index, count, goods);

			return console.log(backet);

		}


		//показывает все доступные товары и их цены
		function showGoods(g) {
			var order = g.reduce(function(prev, curr) {
				return [...prev, curr.name, curr.price + ' рублей']
			}, ['на сегодня в наличии :']).join('\n');
			console.log(order);
		}


		//выводит сумму товаров в корзине
		function countBasketPrice(backet) {
			var initialValue = 0;
			var sum = backet.reduce(
				(result, Val) => result + Val.sum,
				initialValue
			);
			return sum;
		}

		//показывает что лежит в корзине
		function showBacket(g) {
			let order = g.reduce(function(prev, curr) {
				return [...prev, curr.name, curr.count + ' шт', curr.sum + ' рублей']
			}, ['В корзине :']).join('\n');
			console.log(order);
		}


		//добавляем в корзину по индексу товара второй параметр количество
		addGoodBacket(2, );
		addGoodBacket(0, 2);
		addGoodBacket(2, 2);


		//вызвана функция показа товара приняла - товары
		showGoods(goods);

		//вызвана функция показа содержания корзины  приняла - корзину
		showBacket(backet);

		//вызвана ф-я сумма товаров в корзине
		let b = countBasketPrice(backet);
		console.log('Итого: ' + b);

	</script>
</body>

</html>
